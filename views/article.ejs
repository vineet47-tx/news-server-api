<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= article.title %> - <%= name %></title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90' fill='black'>A</text></svg>">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .article-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3rem 0;
            margin-bottom: 2rem;
        }
        .article-content {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        .article-meta {
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 1rem;
            margin-bottom: 2rem;
        }
        .sidebar-card {
            max-height: 300px;
            overflow: auto;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }
        .category-btn {
            border-radius: 20px;
            margin: 2px;
            transition: all 0.3s ease;
        }
        .category-btn:hover {
            transform: scale(1.05);
        }
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }
    </style>
</head>

<body>
    <!-- Include Header File -->
    <%- include('header') %>

    <!-- Back Button -->
    <a href="/" class="btn btn-secondary back-btn">
        <i class="fas fa-arrow-left me-1"></i>Back to News
    </a>

    <div class="article-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <h1 class="display-4 fw-bold"><%= article.title %></h1>
                    <div class="mt-3">
                        <% if (article.tags && article.tags.length > 0) { %>
                            <% article.tags.forEach(function(tag) { %>
                                <span class="badge bg-light text-dark me-2"><%= tag %></span>
                            <% }); %>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <!-- Article Content -->
            <div class="col-lg-8">
                <div class="article-content">
                    <div class="article-meta">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <i class="fas fa-user me-2"></i><strong><%= article.author || 'Staff' %></strong>
                                <span class="text-muted ms-3">
                                    <i class="fas fa-calendar me-1"></i><%= new Date(article.publishedAt).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) %>
                                </span>
                            </div>
                            <div>
                                <button class="btn btn-outline-primary btn-sm me-2">
                                    <i class="fas fa-share me-1"></i>Share
                                </button>
                                <button class="btn btn-outline-danger btn-sm">
                                    <i class="fas fa-heart me-1"></i>Like
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="article-body">
                        <p class="lead"><%= article.summary %></p>

                        <!-- Article content placeholder -->
                        <div class="mt-4">
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>

                            <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

                            <h3>Key Points</h3>
                            <ul>
                                <li>Important point number one</li>
                                <li>Another crucial aspect</li>
                                <li>Final key consideration</li>
                            </ul>

                            <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
                        </div>
                    </div>

                    <!-- Article Footer -->
                    <div class="mt-5 pt-4 border-top">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <small class="text-muted">Published on <%= new Date(article.publishedAt).toLocaleDateString() %></small>
                            </div>
                            <div>
                                <button class="btn btn-primary me-2">
                                    <i class="fas fa-comment me-1"></i>Comments (0)
                                </button>
                                <button class="btn btn-outline-primary">
                                    <i class="fas fa-bookmark me-1"></i>Save
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="col-lg-4">
                <div class="mb-4" id="latest">
                    <h5 class="section-title mb-3">Latest Headlines</h5>
                    <div class="sidebar-card card">
                        <div class="card-body p-0">
                            <% if (sidebar && sidebar.latest && sidebar.latest.length) { %>
                                <div class="list-group list-group-flush">
                                    <% sidebar.latest.forEach(function(item, index) { %>
                                        <a href="#" class="list-group-item list-group-item-action d-flex align-items-center py-3">
                                            <div class="flex-shrink-0 me-3">
                                                <span class="badge bg-primary rounded-circle" style="width: 24px; height: 24px; display: inline-flex; align-items: center; justify-content: center; font-size: 0.75rem;"><%= index + 1 %></span>
                                            </div>
                                            <div class="flex-grow-1">
                                                <small class="fw-semibold"><%= item %></small>
                                            </div>
                                        </a>
                                    <% }); %>
                                </div>
                            <% } else { %>
                                <div class="p-3 text-center text-muted">
                                    <i class="fas fa-clock fa-2x mb-2"></i>
                                    <p class="mb-0 small">No latest headlines available.</p>
                                </div>
                            <% } %>
                        </div>
                    </div>
                </div>

                <div class="mb-4" id="categories">
                    <h5 class="section-title mb-3">Categories</h5>
                    <div class="d-flex flex-wrap">
                        <% if (sidebar && sidebar.categories && sidebar.categories.length) { %>
                            <% sidebar.categories.forEach(function(cat) { %>
                                <a href="/category/<%= cat.slug %>" class="btn btn-outline-primary category-btn btn-sm mb-2 me-2">
                                    <i class="fas fa-tag me-1"></i><%= cat.name %>
                                </a>
                            <% }); %>
                        <% } else { %>
                            <div class="text-center py-3">
                                <i class="fas fa-tags fa-2x text-muted mb-2"></i>
                                <small class="text-muted">No categories available.</small>
                            </div>
                        <% } %>
                    </div>
                </div>

                <!-- Related Articles -->
                <div class="card">
                    <div class="card-body">
                        <h6 class="card-title">Related Articles</h6>
                        <div class="list-group list-group-flush">
                            <a href="#" class="list-group-item list-group-item-action small">Related article 1</a>
                            <a href="#" class="list-group-item list-group-item-action small">Related article 2</a>
                            <a href="#" class="list-group-item list-group-item-action small">Related article 3</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>

    <script>
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>

</html>